---
title: "Homework 2"
author: Safiya Sirota
date: 2021-10-09
output: 
  github_document:
    toc: TRUE
---

```{r, echo = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
library(haven)
```

## Problem 1

__Importing Mr. Trash Wheel dataset:__

```{r}
mrtrash_df <- 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = "A2:N406"
    ) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls,0))
```

__Importing precipitation datasets:__

2018 dataset:

```{r}
prcp_2018 <-
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month, total) %>% 
  mutate(year = 2018)
```

2019 dataset:

```{r}
prcp_2019 <-
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2019 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month, total) %>% 
  mutate(year = 2019)
```

Combining and tidying the two prcp datasets:

```{r}
prcp_tidy <-
  bind_rows(prcp_2018, prcp_2019) %>% 
  mutate(month = month.name[month]) %>% 
  select(year, month, prcp_amt = total)
```

__Describing the datasets:__


There are `r nrow(prcp_tidy)` observations in the `prcp_tidy` dataset and `r nrow(mrtrash_df)` observations in the `mrtrash_df` dataset. The key variables in the `mrtrash_df` dataset are:

* __dumpster identification__ (`r names(mrtrash_df)[1:4]`),

* __amount of trash__ (`r names(mrtrash_df)[5:6]`),

* __types of trash__ (`r names(mrtrash_df)[7:13]`), and

* __number of homes powered__ (`r names(mrtrash_df)[14]`)

The key variables in the `prcp_tidy` dataset are:

* __`r names(prcp_tidy)[1:2]`__ and

* __precipitation amount__.

For available data, the total precipitation in 2018 was `r sum(pull(prcp_2018, total))` inches. The median number of sports balls in a dumpster in 2019 was `r median(pull(mrtrash_df, sports_balls))`.

## Problem 2

__Importing and cleaning `pols-month` dataset:__

```{r}
pols_df <- read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(
    year = as.numeric(year), 
    month = month.name[as.numeric(month)],
    day = as.numeric(day),
    president = case_when(
      prez_gop == 1 ~ "gop",
      prez_dem == 1 ~ "dem")
    ) %>% 
  select(-prez_gop, -prez_dem, -day)
```

__Importing and cleaning `snp` dataset:__

```{r}
snp_df <- read_csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  separate(date, into = c("month", "day", "year"), sep = "/") %>% 
  mutate(
    year = case_when(
      year < 22 ~ 2000 + as.numeric(year), 
      year > 22 ~ 1900 + as.numeric(year)
    ),
    month = month.name[as.numeric(month)],
    day = as.numeric(day)
  ) %>% 
  select(year, month, close)
```

__Importing and cleaning `unemployment` dataset:__

```{r}
unemploy_df <- read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemp_pct"
  ) %>% 
  mutate(month = month.name[match(month, month.abb)]) %>% 
  rename(year = Year)
```

__Joining all three datesets:___
```{r}
five38_df <-
  full_join(pols_df, snp_df, by = c("year", "month")) %>% 
  full_join(unemploy_df,by = c("year", "month"))
```

__Desribing the datasets:__

